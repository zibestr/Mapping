# Mapping вузов платформы проекта "Твой Ход"
## Бизнес описание задачи
Для проекта "Твой Ход" собран новый список образовательных учреждений. Цель нового списка - очистить старый список от "ошибочных" вузов, дубликатов, средних учебных заведений, нецензурных наименований в базе проекта и тд.

Для замены старого списка на новый был проведен mapping - на основе алгоритмов нечеткого сравнения строк наименованиям из старого списка были сопоставлены наименования из нового списка.

На основе составленного mapping'а необходимо заменить старый список на новых, не нарушив связи между сущностями базы данных.
## Термины задачи
*Старая таблица* - существующая на данный момент таблица учебных заведений в базе данных проекта.

*Новая таблица* - заново сформированная таблица высших учебных заведений РФ в приложенном файле **mapping.csv**, которая по итогу задачи должна заменить *старую таблицу*.
## Функциональное описание задачи
1. Сделать копию *старой таблицы* (на случай непредвиденных ошибок).
2. Скопировать связи пользователей платформы и владельцев ЛК вузов со *старой таблицей*.
3. Очистить *старую таблицу*, сохранив ее структуру.
4. Перенести *новую таблицу* в базу данных проекта из файла **new_db.csv** (см. **Пояснительная записка к приложенным файлам**).
5. Переназначить связи пользователей и владельцев ЛК вузов со *старой таблицей* на *новую таблицу* с помощью файла **mapping.csv** (см. **Пояснительная записка к приложенным файлам**).
## Пояснительная записка к приложенным файлам
### new_db.csv
*Новая таблица* вузов для БД
#### Поля:
 - id - id учебного заведения
 - legal_inn - ИНН учебного заведения
 - legal_ogrn - ОГРН учебного заведения
 - legal_kpp - КПП (код причины поставновки) учебного заведения
 - name - Полное наименование учебного заведения 
 - short_name - Краткое наименование учебного заведения
 - legal_address - Юридический адрес учебного заведения
 - region - id региона учебного заведения
 - district_id - id федерального округа 
 - branch - флаг, является ли учебного заведение филиалом
### mapping.csv
Таблица с итоговым mapping'ом вузов платформы
#### Поля:
 - old_id - id учебного заведения из *старой таблицы*
 - new_id - id учебного заведения из *новой таблицы* **new_db.csv**

Алгоритм составления список см. в [algorithms.md](algorithms.md)